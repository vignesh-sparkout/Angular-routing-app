<div class="employee-layout">
  <div class="employee-container">
    <div class="employee-header">
      <h2 class="employee-title">Employee List</h2>
      <button class="btn-add" (click)="onAddEmployee()">+ Add Employee</button>
    </div>

    <div class="table-wrapper">
      <table class="employee-table">
        <thead>
          <tr>
            <th>Employee Id</th>
            <th>Employee Name</th>
            <th>Gender</th>
            <th>Email</th>
            <th>Role</th>
            <th>Status</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let emp of employees">
            <td>{{ emp.id }}</td>
            <td>{{ emp.name }}</td>
            <td>{{ emp.gender }}</td>
            <td>{{ emp.email }}</td>
            <td>{{ emp.role }}</td>
            <td>
              <span class="status" [ngClass]="emp.status === 'Active' ? 'active' : 'inactive'">
                {{ emp.status }}
              </span>
            </td>
            <td class="action-group">
              <button class="btn-edit" (click)="onEdit(emp)">Edit</button>
              <button class="btn-delete" (click)="onDelete(emp.id)">Delete</button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <div class="modal-backdrop" *ngIf="showAddModal">
    <div class="modal-card">
      <h3>Add Employee</h3>

      <form #empForm="ngForm" (ngSubmit)="onSaveEmployee(empForm)" novalidate>
        <div class="form-grid">
          <div>
            <label>Employee ID *</label>
            <input type="text" name="id" [(ngModel)]="newEmployee.id" #id="ngModel" required />
            <small class="error" *ngIf="id.invalid && (id.touched || formSubmitted)">Employee ID is required.</small>
          </div>

          <div>
            <label>Name *</label>
            <input type="text" name="name" [(ngModel)]="newEmployee.name" #name="ngModel" required />
            <small class="error" *ngIf="name.invalid && (name.touched || formSubmitted)">Name is required.</small>
          </div>

          <div>
            <label>Gender</label>
            <div class="radio-group">
              <label><input type="radio" name="gender" value="Male" [(ngModel)]="newEmployee.gender" /> Male</label>
              <label><input type="radio" name="gender" value="Female" [(ngModel)]="newEmployee.gender" /> Female</label>
              <label><input type="radio" name="gender" value="Other" [(ngModel)]="newEmployee.gender" /> Other</label>
            </div>
          </div>

          <div>
            <label>Email *</label>
            <input type="email" name="email" [(ngModel)]="newEmployee.email" #email="ngModel" required email />
            <small class="error" *ngIf="email.errors?.['required'] && (email.touched || formSubmitted)">Email is required.</small>
            <small class="error" *ngIf="email.errors?.['email'] && (email.touched || formSubmitted)">Enter a valid email.</small>
          </div>

          <div>
            <label>Role *</label>
            <select name="role" [(ngModel)]="newEmployee.role" #role="ngModel" required>
              <option value="">Select role</option>
              <option *ngFor="let roleItem of roleOptions" [value]="roleItem">{{ roleItem }}</option>
            </select>
            <small class="error" *ngIf="role.invalid && (role.touched || formSubmitted)">Role is required.</small>
          </div>

          <div>
            <label>Status *</label>
            <select name="status" [(ngModel)]="newEmployee.status" #status="ngModel" required>
              <option value="">Select status</option>
              <option *ngFor="let statusItem of statusOptions" [value]="statusItem">{{ statusItem }}</option>
            </select>
            <small class="error" *ngIf="status.invalid && (status.touched || formSubmitted)">Status is required.</small>
          </div>

          <div>
            <label>Phone Number (Optional)</label>
            <input type="tel" name="phone" [(ngModel)]="newEmployee.phone" />
          </div>

          <div>
            <label>Date of Joining *</label>
            <input type="date" name="joiningDate" [(ngModel)]="newEmployee.joiningDate" #joiningDate="ngModel" required />
            <small class="error" *ngIf="joiningDate.invalid && (joiningDate.touched || formSubmitted)">Date of Joining is required.</small>
          </div>
        </div>

        <div class="modal-actions">
          <button type="submit" class="btn-save">Save</button>
          <button type="button" class="btn-cancel" (click)="onCancelAdd()">Cancel</button>
        </div>
      </form>
    </div>
  </div>
</div>
